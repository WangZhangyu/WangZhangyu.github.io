{"meta":{"title":"Hexo","subtitle":"","description":"","author":"Wang Zhangyu","url":"http://example.com","root":"/"},"pages":[{"title":"标签","date":"2023-07-19T08:24:16.000Z","updated":"2023-07-19T08:37:13.889Z","comments":true,"path":"tags/index.html","permalink":"http://example.com/tags/index.html","excerpt":"","text":""},{"title":"分类","date":"2023-07-19T08:23:11.000Z","updated":"2023-07-19T08:32:07.212Z","comments":true,"path":"categories/index.html","permalink":"http://example.com/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"Nodejs","slug":"123/index","date":"2023-07-19T05:19:19.000Z","updated":"2023-07-19T07:13:48.381Z","comments":true,"path":"2023/07/19/123/index/","link":"","permalink":"http://example.com/2023/07/19/123/index/","excerpt":"","text":"博客主题 hexo-theme-pure下载链接 https://github.com/cofess/hexo-theme-pure","categories":[],"tags":[]},{"title":"博客主题","slug":"ha/index","date":"2023-07-19T05:19:19.000Z","updated":"2023-07-19T07:12:43.102Z","comments":true,"path":"2023/07/19/ha/index/","link":"","permalink":"http://example.com/2023/07/19/ha/index/","excerpt":"","text":"博客主题 hexo-theme-pure下载链接 https://github.com/cofess/hexo-theme-pure","categories":[],"tags":[]},{"title":"Linux服务器运维","slug":"搭建Hexo服务器/t1/index","date":"2023-07-18T17:09:50.000Z","updated":"2023-07-27T17:09:52.000Z","comments":true,"path":"2023/07/19/搭建Hexo服务器/t1/index/","link":"","permalink":"http://example.com/2023/07/19/%E6%90%AD%E5%BB%BAHexo%E6%9C%8D%E5%8A%A1%E5%99%A8/t1/index/","excerpt":"","text":"@TOC 更新日期：2022&#x2F;12&#x2F;4管理员：王章钰 12345678910gantt dateFormat YYYY-MM-DD title 服务器购买 section 现有服务器 tomo 01 :done, des1, 2015-01-06,2020-12-04 tomo 02 :done, des2, 2015-01-06,2020-12-04 tomo 03 : des3, 2015-01-06,2022-12-04 amax : des4, 2019-01-06,2022-12-04 node100 : des5,2019-01-06,2022-12-04 dell : des6,2020-01-06,2022-12-04 新服务器部署 若采购新服务器，需要对home做单独分区，安装磁盘限额（可限制5G）。避免no sapce出现 服务器基本信息密码更新日期：2022&#x2F;12&#x2F;4 服务器 IP root密码 用途 属性 dell ******* ******* GPU 4块A100(40G左右显存) amax ******* ******* GPU 8块 GeForce GTX 1080（11G左右显存） node100 ******* ******* CPU 8个计算节点 tomo 03 ******* ******* CPU 服务器 dell服务器开机挂载data2挂载在amax上，dell服务器通过访问amax来共享data2的数据。所以dell服务器正常使用的前提是amax正常。dell服务器每次开机需要重新挂载data2，挂载命令A100挂载data3(node100服务器的存储)和data2 12mount -t nfs ***.***.***.***:/public/home /data3mount -t nfs ***.***.***.***:/data2 /data2/ ***分别是node100的IP，amax的IPAmax挂载A100上的文件 1mount -t nfs ***.***.***.***:/mnt/SCQR_data1 /mnt/SCQR_data1 ***为dell的IP或者修改&#x2F;etc&#x2F;fstab 12345678910111213141516(base) wangzy@dell:~$ cat /etc/fstab# /etc/fstab: static file system information.## Use &#x27;blkid&#x27; to print the universally unique identifier for a# device; this may be used with UUID= as a more robust way to name devices# that works even if disks are added and removed. See fstab(5).## &lt;file system&gt; &lt;mount point&gt; &lt;type&gt; &lt;options&gt; &lt;dump&gt; &lt;pass&gt;# / was on /dev/sda3 during installationUUID=6df9bb4a-766b-4ab1-92da-bad6179f800a / ext4 errors=remount-ro 0 1# /boot/efi was on /dev/sda1 during installationUUID=184B-1142 /boot/efi vfat umask=0077 0 1# swap was on /dev/sda2 during installationUUID=2e147d59-66aa-491e-a878-1e77aed61cce none swap sw 0 0192.168.0.3:/data2 /data2 nfs defaults 1 1 如果共享磁盘没有挂载，执行/etc/rc.locallink 关机与重启关机 poweroff, shutdown -h +1重启 reboot, shutdown -r +1对于集群服务器，可能需要同步 clusconf –sync-do &#x2F;etc&#x2F;rc.local 修改root密码 passwd root(直接登录root修改) sudo passwd（利用sudo账户修改） 忘记密码（重启服务器，单用户模式修改）： https://cloud.tencent.com/developer/article/1843568 http://m.blog.chinaunix.net/ui-21209618-id-4738916.html node100 集群服务器开关机：开机顺序：1.IB交换机（一般不用管）2.网络交换机（一般不用管）3.存储服务器4.管理节点5.计算节点 关机顺序：（倒着来）1.计算节点2.管理节点3.存储服务器4.网络交换机（一般不用管）5.IB交换机（一般不用管） 服务器安全安装fail2ban sudo apt install fail2ban设置fail2ban配置策略sudo vi /etc/fail2ban/jail.local检查 Jails状况：sudo fail2ban-client status sshd封禁IP:sudo fail2ban-client set sshd banip 23.34.45.56解禁的IP:sudo fail2ban-client set sshd unbanip 23.34.45.56 tomoplus图像显示问题ssh 连接是加X或Yssh -Y node1ssh -X node1运行xterm查看是否有图形界面弹出，如果没有，说明本次连接的shell不能显示图像 1[wangzy@node100 ~]$ xterm &amp; 解决方法：一般重启终端（如：重启Mobaxterm） tomoplus license问题tomoplus激活不需要root，任何普通账户都已运行下边的激活操作选择当年的Tomoplus版本*2022.lic 123456789[wangzy@node100 ~]$ cd ~[wangzy@node100 ~]$ cat .flexlmrcGEOTOMO_LICENSE_FILE=/public/software/Geotomo_all_versions/GeoTomo64_v63_Auto/GeoTomo64jre18/TomoPlus/Tomo3D/../../license:/public/software/Geotomo_all_versions/GeoTomo64_v63_Auto/GeoTomo64/license[wangzy@node100 ~]$ cd /public/software/Geotomo_all_versions/GeoTomo64_v63_Auto/GeoTomo64jre18/TomoPlus/Tomo3D/../../license[wangzy@node100 license]$ lsgeotomo license.v11.10 lmdown lmreread lmutil tomoplus_6pt3_vecon_4pt5_velmap_geothrust_4pt1_linux_USTC_node100_e8611f3264f8_31dec2021.liclicense.old lmdiag lmgrd lmstat README.txt tomoplus_6pt4_vecon_4pt5_velmap_geothrust_4pt1_linux_USTC_node100_e8611f3264f8_31dec2022.lic[wangzy@node100 license]$ ./lmgrd -c tomoplus_6pt4_vecon_4pt5_velmap_geothrust_4pt1_linux_USTC_node100_e8611f3264f8_31dec2022.lic 如果仍有问题，先关闭tomoplus守护进程，重新激活12[wangzy@node100 license]$ ./lmdown -c tomoplus_6pt4_vecon_4pt5_velmap_geothrust_4pt1_linux_USTC_node100_e8611f3264f8_31dec2022.lic[wangzy@node100 license]$ ./lmgrd -c tomoplus_6pt4_vecon_4pt5_velmap_geothrust_4pt1_linux_USTC_node100_e8611f3264f8_31dec2022.lic 如果重启不成功，遇到 Permission denied的情况，直接删掉文件&#x2F;var&#x2F;tmp&#x2F;lockgeotomo 创建账户 单节点服务器：dell, amax, tomo 03 adduser XXX（创建用户） userdel XXX 集群服务器： node100 clusconf -au XXX（创建用户） clusconf -du XXX (删除用户) 更改文件夹所有者、更改组更改文件夹所有者 chown wangzy –R wangzy&#x2F;更改文件夹所有组 chgrp users –R wangzy ssh问题查看一下home目录下有没有 .ssh 文件夹， 用 ls -al查看 (注：linux系统中以“.”开头的是隐藏文件)如果没有，就自己建立一个 ： mkdir .sshcd然后进入 .ssh，依次运行：1 ssh-keygen （命令后一直敲空格就行, 会生成几个文件）2 cat id_dsa.pub &gt;&gt; authorized_keys3 退出.ssh 至你的home， 运行 chmod -R 755 .ssh4 进入.ssh， chmod 600 * service sshd restart GPU: 服务器显存占用但是找不到pidfuser -v &#x2F;dev&#x2F;nvidia*fuser -k &#x2F;dev&#x2F;nvidia* Sudo 账户下操作 GPU nvidia-smi12345678910111213141516171819202122232425262728293031323334353637383940414243(base) wangzy@dell:~$ nvidia-smiTue Dec 6 15:40:01 2022+-----------------------------------------------------------------------------+| NVIDIA-SMI 515.86.01 Driver Version: 515.86.01 CUDA Version: 11.7 ||-------------------------------+----------------------+----------------------+| GPU Name Persistence-M| Bus-Id Disp.A | Volatile Uncorr. ECC || Fan Temp Perf Pwr:Usage/Cap| Memory-Usage | GPU-Util Compute M. || | | MIG M. ||===============================+======================+======================|| 0 NVIDIA A100-PCI... Off | 00000000:17:00.0 Off | 0 || N/A 34C P0 34W / 250W | 4MiB / 40960MiB | 0% Default || | | Disabled |+-------------------------------+----------------------+----------------------+| 1 NVIDIA A100-PCI... Off | 00000000:65:00.0 Off | 0 || N/A 34C P0 33W / 250W | 4MiB / 40960MiB | 0% Default || | | Disabled |+-------------------------------+----------------------+----------------------+| 2 NVIDIA A100-PCI... Off | 00000000:CA:00.0 Off | 0 || N/A 35C P0 38W / 250W | 4MiB / 40960MiB | 0% Default || | | Disabled |+-------------------------------+----------------------+----------------------+| 3 NVIDIA A100-PCI... Off | 00000000:E3:00.0 Off | 0 || N/A 34C P0 35W / 250W | 4MiB / 40960MiB | 0% Default || | | Disabled |+-------------------------------+----------------------+----------------------++-----------------------------------------------------------------------------+| Processes: || GPU GI CI PID Type Process name GPU Memory || ID ID Usage ||=============================================================================|| 0 N/A N/A 3413 G /usr/lib/xorg/Xorg 4MiB || 1 N/A N/A 3413 G /usr/lib/xorg/Xorg 4MiB || 2 N/A N/A 3413 G /usr/lib/xorg/Xorg 4MiB || 3 N/A N/A 3413 G /usr/lib/xorg/Xorg 4MiB |+-----------------------------------------------------------------------------+(base) wangzy@dell:~$ nvcc -Vnvcc: NVIDIA (R) Cuda compiler driverCopyright (c) 2005-2022 NVIDIA CorporationBuilt on Wed_Jun__8_16:49:14_PDT_2022Cuda compilation tools, release 11.7, V11.7.99Build cuda_11.7.r11.7/compiler.31442593_0 tmp 空间不足 原因：可能读取大量文件（IO需求很大），每打开一个文件，&#x2F;tmp都会有对文件的缓存 解决方案： 减少大量文件读取 删除&#x2F;tmp下的部分内容（容易误删） 增大&#x2F;tmp空间，拓展&#x2F;tmp Link1 Link2 Ubuntu: 用户无法自动加载 .bashrc的问题解决办法：在~&#x2F;.bash_profile里添加上：if [ -f ~&#x2F;.bashrc ] ; then source ~&#x2F;.bashrcfi 服务器换ip科大的DNS:202.38.64.1202.38.64.7用笔记本电脑连接网线测试 网口是否有问题，连接网络通，获取ip 学习链接常用命令链接： https://www.runoob.com/linux/linux-command-manual.html科大BBS Linux系统： http://bbs.ustc.edu.cn/cgi/bbsdoc?board=Linux清华水木社区Linux系统与应用： http://www.newsmth.net/bbsdoc.php?board=LinuxApp清华水木社区Linux开发与高级讨论： http://www.newsmth.net/bbsdoc.php?board=LinuxDevChinaUnix：http://www.chinaunix.net/ CSDN：https://bbs.csdn.net/forums/Linux鸟哥的Linux私房菜：http://www.runoob.com/linux/linux-command-manual.html Linux常用软件推荐集合汇总： http://www.it610.com/article/1929114.htmLinux指令大全： http://www.runoob.com/linux/linux-command-manual.html李会民 (中国科大超算中心) Linux操作系统使用基础: http://hmli.ustc.edu.cn/","categories":[],"tags":[]},{"title":"Python Folium 绘制交互式地图","slug":"test/index","date":"2023-07-18T10:09:22.000Z","updated":"2023-07-18T10:09:26.000Z","comments":true,"path":"2023/07/18/test/index/","link":"","permalink":"http://example.com/2023/07/18/test/index/","excerpt":"","text":"https://github.com/WangZhangyu/Interactive_map Foliumfolium是python非常好用的交互式地图工具包，今天我们用folium来绘制简单精美的地震分布热力图。我们选择川滇部分地区，蓝色方框圈定的区域进行绘制。橙色圆圈代表的是AETA 观测台站，黑色圆圈代表的是地震（ML3.5以上），黑色圆圈越大，震级越大。绘制地震分布的热力图，我们可以非常清晰的看到地震的集中分布情况。 绘制结果以.html的格式保存，我们可以对地图随意的放大缩小，当鼠标停留在黑色圆圈（地震）上时，地图会显示地震的发震时间和震级信息；当鼠标停留在橙色圆圈（台站）上时，会显示对应的台站名称。 安装Folium 库 1pip install folium 导入必要的库 1234import foliumimport pandas as pdimport webbrowserfrom folium.plugins import HeatMap 加载AETA台站的信息并显示 12345678910111213cdata = pd.read_csv(&#x27;StationInfo.csv&#x27;)for lat, lon,label in zip(cdata.Latitude, cdata.Longitude, cdata.Title): incidents.add_child( folium.CircleMarker( [lat, lon], radius=7, color=&#x27;yellow&#x27;, fill=True, fill_color=&#x27;red&#x27;, fill_opacity=0.4, tooltip=label ) ) 加载并绘制地震目录信息 12345678910111213141516eq = pd.read_csv(&#x27;eqlst.csv&#x27;)for lat, lon, mag, time in zip(eq.Latitude, eq.Longitude, eq.Magnitude,eq.Time): incidents.add_child([图片上传中...(catalog.jpg-6f9441-1618157345666-0)] folium.CircleMarker( [lat, lon], radius=(mag-3)*4, color=&#x27;black&#x27;, fill=True, fill_color=&#x27;black&#x27;, fill_opacity=0.5, weight = 0.001, stroke = False, tooltip= &#x27;%s ML %.f&#x27; % (time,mag) ) ) 绘制地震分布热力图 12heatdata = eq[[&#x27;Latitude&#x27;,&#x27;Longitude&#x27;,&#x27;Magnitude&#x27;]].values.tolist()HeatMap(heatdata).add_to(incidents) 完整代码 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071&quot;&quot;&quot;Created on Sun Apr 11 20:40:32 2021@author: Zhangyu Wang&quot;&quot;&quot;import foliumimport pandas as pdimport webbrowserfrom folium.plugins import HeatMap# Chuandain latitude and longitudelatitude = 28longitude = 102.5# instantiate a feature group for the incidents in the dataframeincidents = folium.map.FeatureGroup()# read stations cdata = pd.read_csv(&#x27;StationInfo.csv&#x27;)for lat, lon,label in zip(cdata.Latitude, cdata.Longitude, cdata.Title): incidents.add_child( folium.CircleMarker( [lat, lon], radius=7, color=&#x27;yellow&#x27;, fill=True, fill_color=&#x27;red&#x27;, fill_opacity=0.4, tooltip=label ) ) # read catalogeq = pd.read_csv(&#x27;eqlst.csv&#x27;)for lat, lon, mag, time in zip(eq.Latitude, eq.Longitude, eq.Magnitude,eq.Time): incidents.add_child( folium.CircleMarker( [lat, lon], radius=(mag-3)*4, color=&#x27;black&#x27;, fill=True, fill_color=&#x27;black&#x27;, fill_opacity=0.5, weight = 0.001, stroke = False, tooltip= &#x27;%s ML %.f&#x27; % (time,mag) ) ) # catalog heatmapheatdata = eq[[&#x27;Latitude&#x27;,&#x27;Longitude&#x27;,&#x27;Magnitude&#x27;]].values.tolist()HeatMap(heatdata).add_to(incidents)# add a single earthquakeincidents.add_child(folium.Marker([28.9, 103.3],icon=folium.Icon(color=&#x27;red&#x27;), tooltip=&#x27;M = 4.0&#x27;))# add area borderls = folium.PolyLine(locations=[[22,98],[22,107],[34,107],[34,98],[22,98]],color=&#x27;blue&#x27;)ls.add_to(incidents)# add incidents to mapmy_map = folium.Map(location=[latitude, longitude], zoom_start=6)my_map.add_child(incidents)# add latitude and longitude in the map when clickmy_map.add_child(folium.LatLngPopup())# save mapmy_map.save(&#x27;Chuandian_aeta.html&#x27;)webbrowser.open(&#x27;Chuandian_aeta.html&#x27;)","categories":[],"tags":[]},{"title":"搭建Hexo服务器","slug":"搭建Hexo服务器/index","date":"2023-07-18T10:05:41.000Z","updated":"2023-07-18T10:05:47.000Z","comments":true,"path":"2023/07/18/搭建Hexo服务器/index/","link":"","permalink":"http://example.com/2023/07/18/%E6%90%AD%E5%BB%BAHexo%E6%9C%8D%E5%8A%A1%E5%99%A8/index/","excerpt":"","text":"准准备出发fe &#96;&#96;&#96;&#96;&#96;&#96;fs","categories":[{"name":"blog","slug":"blog","permalink":"http://example.com/categories/blog/"}],"tags":[{"name":"blog","slug":"blog","permalink":"http://example.com/tags/blog/"},{"name":"de","slug":"de","permalink":"http://example.com/tags/de/"}]},{"title":"Hello World～～～～～～～+++","slug":"hello-world","date":"2023-07-18T09:44:32.957Z","updated":"2023-07-19T08:28:26.583Z","comments":true,"path":"2023/07/18/hello-world/","link":"","permalink":"http://example.com/2023/07/18/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[{"name":"haha","slug":"haha","permalink":"http://example.com/tags/haha/"}]}],"categories":[{"name":"blog","slug":"blog","permalink":"http://example.com/categories/blog/"}],"tags":[{"name":"blog","slug":"blog","permalink":"http://example.com/tags/blog/"},{"name":"de","slug":"de","permalink":"http://example.com/tags/de/"},{"name":"haha","slug":"haha","permalink":"http://example.com/tags/haha/"}]}